<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>寵物廚房</title>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />
    <meta content="" name="description" />
    <meta content="" name="author" />
    <!-- ================== 圖示設定 ================== -->
    <link rel="icon" type="image/png" href="../images/icon/icon_images.png" />

    <!-- ================== CSS 基本樣式 ================== -->
    <link href="../css/basic/fonts.googleapis.css" rel="stylesheet" />
    <link href="../css/basic/jquery-ui.min.css" rel="stylesheet" />
    <link href="../css/basic/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../css/basic/animate.min.css" rel="stylesheet" />
    <link href="../css/basic/style.min.css" rel="stylesheet" />
    <link href="../css/basic/style-responsive.min.css" rel="stylesheet" />
    <link href="../css/basic/default.css" rel="stylesheet" />
    <link href="../css/basic/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
    <!-- ================== CSS Table樣式 ================== -->
    <link href="../css/tableTools/data-table.css" rel="stylesheet" />
    <!-- ================== CSS notify樣式 ================== -->
    <link href="../css/notify/notyf.min.css" rel="stylesheet" />
    <!-- ================== CSS sweetalert2 ================== -->
    <link href="../css/sweetalert2/sweetalert2.min.css" rel="stylesheet" />
</head>
<body>
    <!-- 頁面loader開始 -->
    <div id="page-loader" class="fade in"><span class="spinner"></span></div>
    <!-- 頁面loader結束 -->
    <!-- 整頁內容開始 -->
    <div id="page-container" class="fade page-sidebar-fixed page-header-fixed">
        <!-- header開始 -->
        <div id="header" class="header navbar navbar-default navbar-fixed-top">
            <!-- 上方title_bar開始 -->
            <div class="container-fluid">
                <!-- title_bar 內文開始 -->
                <div class="navbar-header">
                    <a href="index.html" class="navbar-brand"><span class="navbar-logo"></span> 寵物廚房管理系統</a>
                    <button type="button" class="navbar-toggle" data-click="sidebar-toggled">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
                <!-- title_bar 內文結束 -->
                <!-- 登出與搜尋功能開始 -->
                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown navbar-user">
                        <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown">
                            <img src="../images/user/farmer.png" alt="" />
                            <span class="hidden-xs">使用者名稱</span> <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu animated fadeInLeft">
                            <li><a href="javascript:;">Log Out</a></li>
                        </ul>
                    </li>
                </ul>
                <!-- 登出與搜尋功能結束 -->
            </div>
            <!-- 上方title_bar結束 -->
        </div>
        <!-- header結束 -->
        <!-- sidebar開始 -->
        <div id="sidebar" class="sidebar">
            <!-- 滑動側欄開始 -->
            <div data-scrollbar="true" data-height="100%">
                <!-- sidebar user開始  -->
                <ul class="nav">
                    <li class="nav-profile">
                        <div class="image">
                            <a href="javascript:;"><img src="../images/user/farmer.png" alt="" /></a>
                        </div>
                        <div class="info">
                            放使用者名稱
                            <small>放介紹</small>
                        </div>
                    </li>
                </ul>
                <!-- sidebar user結束 -->
                <!-- 選單項目功能開始 -->
                <ul class="nav">
                    <li class="nav-header">功能選單</li>
                    <li class="has-sub">
                        <a href="javascript:;">
                            <b class="caret pull-right"></b>
                            <i class="fa fa-user"></i>
                            <span>會員管理</span>
                        </a>
                        <ul class="sub-menu">
                            <li><a href="../member/member_administration.html">會員基本資料</a></li>
                            <li><a href="../member/member_freeze.html">會員凍結資料</a></li>
                        </ul>
                    </li>
                    <li class="has-sub">
                        <a href="javascript:;">
                            <b class="caret pull-right"></b>
                            <i class="fa fa-phone"></i>
                            <span>客服管理</span>
                        </a>
                        <ul class="sub-menu">
                            <li><a href="../service/customer_service.html">諮詢</a></li>
                            <li><a href="../service/returns_goods.html">退換貨</a></li>
                            <li><a href="../service/completed_goods.html">已完成</a></li>
                        </ul>
                    </li>
                    <li class="has-sub active">
                        <a href="javascript:;">
                            <b class="caret pull-right"></b>
                            <i class="fa fa-shopping-cart"></i>
                            <span>商品管理</span>
                        </a>
                        <ul class="sub-menu">
                            <li><a href="../product/product_management.html">商品資料</a></li>
                            <li class="active"><a href="../product/product_customized.html">客製化商品</a></li>
                            <li><a href="../product/product_ofstock.html">已下架商品</a></li>
                            <li><a href="../product/product_increase.html">新增商品</a></li>
                        </ul>
                    </li>
                    <li class="has-sub">
                        <a href="javascript:;">
                            <b class="caret pull-right"></b>
                            <i class="fa fa-newspaper-o"></i>
                            <span>廣告管理</span>
                        </a>
                        <ul class="sub-menu">
                            <li><a href="../ad/ad_management.html">廣告列表</a></li>
                            <li><a href="../ad/ad_increase.html">新增廣告</a></li>
                        </ul>
                    </li>
                    <li class="has-sub">
                        <a href="javascript:;">
                            <b class="caret pull-right"></b>
                            <i class="fa fa-gears (alias)"></i>
                            <span>後台管理</span>
                        </a>
                        <ul class="sub-menu">
                            <li><a href="../backstage/backstage_management.html">管理者</a></li>
                            <li><a href="../backstage/administrator.html">新增管理者</a></li>
                        </ul>
                    </li>
                    <!-- begin sidebar minify button -->
                    <li><a href="javascript:;" class="sidebar-minify-btn" data-click="sidebar-minify"><i class="fa fa-angle-double-left"></i></a></li>
                    <!-- end sidebar minify button -->
                </ul>
                <!-- 選單項目功能結束 -->
            </div>
            <!-- 滑動側欄結束 -->
        </div>
        <div class="sidebar-bg"></div>
        <!-- sidebar結束 -->
        <!-- 中間內文開始 -->
        <div id="content" class="content">
            <!-- 瀏覽導航開始 -->
            <ol class="breadcrumb pull-right">
                <li><a href="javascript:;">Home</a></li>
                <li><a href="javascript:;">Page</a></li>
                <li>Page</li>
            </ol>
            <!-- 瀏覽導航結束 -->
            <!-- begin page-header -->
            <h1 class="page-header">肉品名稱管理 <small>編輯肉品名稱與新增</small></h1>
            <!-- end page-header -->
            <!--開始新增成分名稱-->
            <div class="panel panel-inverse">
                <div class="panel-heading">
                    <div class="panel-heading-btn">
                        <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" data-click="panel-expand"><i class="fa fa-expand"></i></a>
                        <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-success" data-click="panel-reload"><i class="fa fa-repeat"></i></a>
                        <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-warning" data-click="panel-collapse"><i class="fa fa-minus"></i></a>
                        <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-danger" data-click="panel-remove"><i class="fa fa-times"></i></a>
                    </div>
                    <h4 class="panel-title">肉品名稱清單</h4>
                </div>
                <div class="panel-body">
                    <p>
                        <a href="javascript: insert_name();" class="btn btn-inverse m-r-5"><i class="fa fa-cogs"></i> 新增 </a>
                    </p>       
                    <div class="table-responsive">
                        <table id="data-table" class="table table-striped table-bordered nowrap" width="100%">
                            <thead>
                                <tr>
                                    <th>刪除</th>
                                    <th>肉品名稱</th>                                    
                                    <th>價格(A規格)</th>
                                    <th>價格(B規格)</th>
                                    <th>價格(C規格)</th>
                                    <th>價格(D規格)</th>
                                </tr>
                            </thead>
                            <!--data-toggle="modal" data-target="#jump-member"-->
                            <tbody id="member_view">
                                <tr>
                                    <td><i class="fa fa-times-circle fa-2x"></i></td>
                                    <td data-toggle="modal" data-target="#jump-ingredient-name"data-id="羊肉" >羊肉</td>
                                    <td>40</td>     
                                    <td>50</td> 
                                    <td>60</td> 
                                    <td>70</td>                                
                                </tr>
                                <tr>
                                    <td><i class="fa fa-times-circle fa-2x" onclick="javascript: delete_name();"></i></td>
                                    <td data-toggle="modal" data-target="#jump-ingredient-name" data-id="雞肉">雞肉</td>
                                    <td>180</td>
                                    <td>280</td>
                                    <td>380</td>
                                    <td>480</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <!--結束新增成分名稱-->
        </div>
        <!-- 中間內文結束 -->
        <!-- footer開始 -->
        <div id="footer" class="footer">
            &copy; 2017 龔旭陽教授實驗室開發 
        </div>
        <!-- footer結束 -->
        <!-- 置頂按鈕開始 -->
        <a href="javascript:;" class="btn btn-icon btn-circle btn-success btn-scroll-to-top fade" data-click="scroll-top"><i class="fa fa-angle-up"></i></a>
        <!-- 置頂按鈕結束 -->
    </div>
    <!-- 整頁內容結束 -->
    <!-- 彈跳視窗開始  -->
    <div class="modal fade" id="jump-ingredient-name" tabindex="-1" role="dialog" aria-labelledby="memberLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title" id="memberLabel">成分名稱修改</h4>
                </div>
                <div class="modal-body">
                    <div class="panel-body">
                        <form class="form-horizontal">
                            <div class="form-group has-sub has-feedback">
                                <label class="col-md-3 control-label">成分名稱</label>
                                <div class="col-md-9">
                                    <input type="text" class="form-control" id="ingredient-name" readonly/>                                  
                                </div>
                            </div>              
                            <div class="form-group has-sub has-feedback">
                                <label class="col-md-3 control-label">高能量低蛋白價錢</label>
                                <div class="col-md-9">
                                    <input type="number" class="form-control" id="ingredient-priceA" />
                                </div>
                            </div>     
                            <div class="form-group has-sub has-feedback">
                                <label class="col-md-3 control-label">低能量低蛋白價錢</label>
                                <div class="col-md-9">
                                    <input type="number" class="form-control" id="ingredient-priceB" />
                                </div>
                            </div>     
                            <div class="form-group has-sub has-feedback">
                                <label class="col-md-3 control-label">低能量高蛋白價錢</label>
                                <div class="col-md-9">
                                    <input type="number" class="form-control" id="ingredient-priceC" />
                                </div>
                            </div>     
                            <div class="form-group has-sub has-feedback">
                                <label class="col-md-3 control-label">高能量高蛋白價錢</label>
                                <div class="col-md-9">
                                    <input type="number" class="form-control" id="ingredient-priceD" />
                                </div>
                            </div>                          
                        </form>                       
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" id="farm_modify">修改</button>
                </div>
            </div>
        </div>
    </div>
    <!-- 彈跳視窗結束  -->
    <!-- ================== JS 基本控制 ================== -->
    <script src="../javascript/basic/jquery-1.12.4.min.js"></script>
    <script src="../javascript/basic/bootstrap/bootstrap.min.js"></script>
    <script src="../javascript/basic/jquery-migrate-1.1.0.min.js"></script>
    <script src="../javascript/basic/jquery-ui.min.js"></script>
    <script src="../javascript/basic/jquery.slimscroll.min.js"></script>
    <!-- ================== JS 擴充控制 ================== -->
    <script src="../javascript/tableTools/table-manage-tabletools.demo.min.js"></script>
    <script src="../javascript/tableTools/jquery.dataTables.js"></script>
    <script src="../javascript/tableTools/dataTables.tableTools.js"></script>
    <script src="../javascript/page_controll/apps.min.js"></script>
    <!-- ================== JS notify控制 ================== -->
    <script src="../javascript/notify/notyf.min.js"></script>
    <!-- ================== JS cookie ================== -->
    <script src="../javascript/cookie/js.cookie-2.1.3.min.js"></script>
    <!-- ================== JS sweetalert2 ================== -->
    <script src="../javascript/sweetalert2/sweetalert2.min.js"></script>
    <script>
		$(document).ready(function() {
		    App.init();
		    TableManageTableTools.init();
		});
		/**bootstrap modal 載入資料**/
		$('table > tbody > tr').click(function () {
		    var priceA = $.trim($(this).find("td:eq(2)").text()) //傳price
		    var priceB = $.trim($(this).find("td:eq(3)").text()) //傳price
		    var priceC = $.trim($(this).find("td:eq(4)").text()) //傳price
		    var priceD = $.trim($(this).find("td:eq(5)").text()) //傳price
		    $("#ingredient-priceA").val(priceA)
		    $("#ingredient-priceB").val(priceB)
		    $("#ingredient-priceC").val(priceC)
		    $("#ingredient-priceD").val(priceD)
            
		    $('#jump-ingredient-name').on('show.bs.modal', function (event) {
		        var button = $(event.relatedTarget) //觸發按鈕
		        var recipient = button.data('id') // 取得data-id attributes 的id值
		        $("#ingredient-name").val(recipient)//設置值給input 
		    });
		});
		
        /**新增名字**/
		var checknum = 0
		function insert_name() {
		    swal({
             title: '◎ 新增：輸入肉品名稱',
             input: 'text',
             showCancelButton: true,
             confirmButtonText: '新增',
             cancelButtonText: '取消',
             showLoaderOnConfirm: true,
             preConfirm: function (name) {
                 return new Promise(function (resolve, reject) {
                     setTimeout(function () {
                         $('table > tbody > tr').each(function () {
                             var checkname = $.trim($(this).find("td:eq(1)").text()); //抓取第二欄的文字
                             if (checkname === name || name === '')//判斷是否有重複肉品名稱
                                 checknum++
                         });                         
                         if (name === '' || checknum > 0 ) {
                             reject('名稱已存在')//新增失敗
                             checknum = 0
                         } else {
                             resolve() //Refresh 刷新圖
                         }
                     }, 2000)
                 })
             },
             allowOutsideClick: false //不可點背景關閉
         }).then(function (name) {
             swal({
                 type: 'success',
                 title: '新增成功!',
                 confirmButtonText: '下一步',
                 html: '下一步輸入 ' + name + ' 的 規格價錢',
                 allowOutsideClick: false //不可點背景關閉
             }).then(function (name) {
                 swal.setDefaults({
                     input: 'number',
                     confirmButtonText: '下一步 &rarr;',
                     cancelButtonText: '取消',
                     showCancelButton: true,
                     animation: false,
                     allowOutsideClick: false,//不可點背景關閉
                     progressSteps: ['1', '2', '3', '4']
                 })
                 var steps = [
                   '高能量低蛋白價錢',
                   '低能量低蛋白價錢',
                   '低能量高蛋白價錢',
                   '高能量高蛋白價錢',
                 ]
                 swal.queue(steps).then(function (result) {
                     swal.resetDefaults()
                     swal({
                         type: 'success',
                         title: '新增成功!',
                         html: '已添加 ' + result + ' 到成分清單',
                         allowOutsideClick: false //不可點背景關閉
                     })                     
                 }, function () {
                     swal.resetDefaults()//未填寫完成(取消)
                 })
             })
         })
            /*
		    swal.setDefaults({
		        input: 'number',
		        confirmButtonText: '下一步 &rarr;',
		        cancelButtonText: '取消',
		        showCancelButton: true,
		        animation: false,
		        allowOutsideClick: false,//不可點背景關閉
		        progressSteps: ['1', '2', '3', '4', '5']
		    })
		    var steps = [
              {
                  title: '輸入肉品名稱',
                  text: 'Chaining swal2 modals is easy',
                  input: 'text'
              },
              'Question 2',
              'Question 3',
              'Question 4',
              'Question 5'
		    ]
		    swal.queue(steps).then(function (result) {
		        swal.resetDefaults()
		        $('table > tbody > tr').each(function () {
		            var checkname = $.trim($(this).find("td:eq(1)").text()); //抓取第二欄的文字
		            if (checkname === result[0] || result[0] === '')//判斷是否有重複肉品名稱
		                checknum++
		        });
		        if (checknum > 0) {//名稱輸入重複
		            swal({
		                type: 'error',
		                title: '新增失敗!',
		                html: '名稱重複',
		                allowOutsideClick: false //不可點背景關閉
		            })
		        } else {
		            swal({
		                type: 'success',
		                title: '新增成功!',
		                html: '以添加 ' + result + ' 到成分清單',
		                allowOutsideClick: false //不可點背景關閉
		            })
		        }	 	        
		    }, function () {
		        swal.resetDefaults()//未填寫完成(取消)
		    })*/
            
		 
		}
        /**刪除原料名字**/
		function delete_name()
		{
		    swal({
		        title: '確定是否刪除?',
		        text: "刪除後無法復原請確認!",
		        type: 'warning',
		        showCancelButton: true,
		        confirmButtonColor: '#3085d6',
		        cancelButtonColor: '#d33',
		        confirmButtonText: '確認',
		        cancelButtonText: '取消',
		        allowOutsideClick: false //不可點背景關閉
		    }).then(function () {
		        swal({
		            type: 'success',
		            title: '刪除成功!',		            
		            allowOutsideClick: false //不可點背景關閉
		        })		      
		    })
		}

    </script>

</body>
</html>
