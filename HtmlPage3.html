<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>寵物廚房</title>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />
    <meta content="" name="description" />
    <meta content="" name="author" />
    <!-- ================== 圖示設定 ================== -->
    <link rel="icon" type="image/png" href="../images/icon/icon_images.png" />

    <!-- ================== CSS 基本樣式 ================== -->
    <link href="../css/basic/fonts.googleapis.css" rel="stylesheet" />
    <link href="../css/basic/jquery-ui.min.css" rel="stylesheet" />
    <link href="../css/basic/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../css/basic/animate.min.css" rel="stylesheet" />
    <link href="../css/basic/style.min.css" rel="stylesheet" />
    <link href="../css/basic/style-responsive.min.css" rel="stylesheet" />
    <link href="../css/basic/default.css" rel="stylesheet" />
    <link href="../css/basic/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
    <!-- ================== CSS Table樣式 ================== -->
    <link href="../css/tableTools/data-table.css" rel="stylesheet" />
    <!-- ================== CSS notify樣式 ================== -->
    <link href="../css/notify/notyf.min.css" rel="stylesheet" />
    <!-- ================== CSS sweetalert2 ================== -->
    <link href="../css/sweetalert2/sweetalert2.min.css" rel="stylesheet" />
</head>
<body>
    <!-- 頁面loader開始 -->
    <div id="page-loader" class="fade in"><span class="spinner"></span></div>
    <!-- 頁面loader結束 -->
    <!-- 整頁內容開始 -->
    <div id="page-container" class="fade page-sidebar-fixed page-header-fixed">
        <!-- header開始 -->
        <div id="header" class="header navbar navbar-default navbar-fixed-top">
            <!-- 上方title_bar開始 -->
            <div class="container-fluid">
                <!-- title_bar 內文開始 -->
                <div class="navbar-header">
                    <a href="../index.html" class="navbar-brand"><span class="navbar-logo"></span> 寵物廚房管理系統</a>
                    <button type="button" class="navbar-toggle" data-click="sidebar-toggled">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
                <!-- title_bar 內文結束 -->
                <!-- 登出與搜尋功能開始 -->
                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown navbar-user">
                        <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown">
                            <img src="../images/user/farmer.png" alt="" />
                            <span class="hidden-xs">使用者名稱</span> <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu animated fadeInLeft">
                            <li><a href="javascript:;">登出</a></li>
                        </ul>
                    </li>
                </ul>
                <!-- 登出與搜尋功能結束 -->
            </div>
            <!-- 上方title_bar結束 -->
        </div>
        <!-- header結束 -->
        <!-- sidebar開始 -->
        <div id="sidebar" class="sidebar">
            <!-- 滑動側欄開始 -->
            <div data-scrollbar="true" data-height="100%">
                <!-- sidebar user開始  -->
                <ul class="nav">
                    <li class="nav-profile">
                        <div class="image">
                            <a href="javascript:;"><img src="../images/user/farmer.png" alt="" /></a>
                        </div>
                        <div class="info">
                            放使用者名稱
                            <small>放介紹</small>
                        </div>
                    </li>
                </ul>
                <!-- sidebar user結束 -->
                <!-- 選單項目功能開始 -->
                <ul class="nav">
                    <li class="nav-header">功能選單</li>
                    <li class="has-sub">
                        <a href="../index.html">
                            <i class="fa fa-laptop"></i>
                            <span>首頁</span>
                        </a>
                    </li>
                    <li class="has-sub">
                        <a href="javascript:;">
                            <b class="caret pull-right"></b>
                            <i class="fa fa-user"></i>
                            <span>會員管理</span>
                        </a>
                        <ul class="sub-menu">
                            <li><a href="../member/member_administration.html">會員基本資料</a></li>
                            <li><a href="../member/member_freeze.html">會員凍結資料</a></li>
                        </ul>
                    </li>
                    <li class="has-sub">
                        <a href="javascript:;">
                            <b class="caret pull-right"></b>
                            <i class="fa fa-shopping-cart"></i>
                            <span>商品管理</span>
                        </a>
                        <ul class="sub-menu">
                            <li><a href="../product/product_management.html">商品資料</a></li>
                            <li class="has-sub">
                                <a href="javascript:;"><b class="caret pull-right"></b>客製化商品</a>
                                <ul class="sub-menu">
                                    <li><a href="../product/customized_category.html">原料規格細節</a></li>
                                    <li><a href="../product/customized_standard.html">一般飼料規格</a></li>
                                    <li><a href="../product/customized_materil.html">原料來源</a></li>
                                </ul>
                            </li>
                            <li><a href="../product/product_ofstock.html">已下架商品</a></li>
                            <li><a href="../product/product_increase.html">新增商品</a></li>
                        </ul>
                    </li>
                    <li class="has-sub">
                        <a href="javascript:;">
                            <b class="caret pull-right"></b>
                            <i class="fa fa-building"></i>
                            <span>訂單管理</span>
                        </a>
                        <ul class="sub-menu">
                            <li><a href="">訂單總覽</a></li>
                            <li><a href="">退換貨總覽</a></li>
                        </ul>
                    </li>
                    <li class="has-sub">
                        <a href="javascript:;">
                            <b class="caret pull-right"></b>
                            <i class="fa fa-newspaper-o"></i>
                            <span>公告管理</span>
                        </a>
                        <ul class="sub-menu">
                            <li><a href="../bulletin/bulletin_management.html">公告列表</a></li>
                            <li><a href="../bulletin/bulletin_increase.html">新增公告</a></li>
                        </ul>
                    </li>
                    <li class="has-sub">
                        <a href="javascript:;">
                            <b class="caret pull-right"></b>
                            <i class="fa fa-phone"></i>
                            <span>客服管理</span>
                        </a>
                        <ul class="sub-menu">
                            <li><a href="../service/customer_noreply.html">未回覆諮詢</a></li>
                            <li><a href="../service/customer_service.html">已回覆諮詢</a></li>

                        </ul>
                    </li>
                    <li class="has-sub active">
                        <a href="javascript:;">
                            <b class="caret pull-right"></b>
                            <i class="fa fa-bank (alias)"></i>
                            <span>生產管理</span>
                        </a>
                        <ul class="sub-menu">
                            <li class="active"><a href="../produce/production-report.html">未製作訂單</a></li>
                            <li><a href="../produce/production-report.html">訂單報表查詢</a></li>

                        </ul>
                    </li>
                    <li class="has-sub">
                        <a href="javascript:;">
                            <b class="caret pull-right"></b>
                            <i class="fa fa-gears (alias)"></i>
                            <span>後台管理</span>
                        </a>
                        <ul class="sub-menu">
                            <li><a href="../backstage/backstage_management.html">管理者</a></li>
                            <li><a href="../backstage/administrator.html">新增管理者</a></li>
                        </ul>
                    </li>
                    <!-- begin sidebar minify button -->
                    <li><a href="javascript:;" class="sidebar-minify-btn" data-click="sidebar-minify"><i class="fa fa-angle-double-left"></i></a></li>
                    <!-- end sidebar minify button -->
                </ul>
                <!-- 選單項目功能結束 -->
            </div>
            <!-- 滑動側欄結束 -->
        </div>
        <div class="sidebar-bg"></div>
        <!-- sidebar結束 -->
        <!-- 中間內文開始 -->
        <div id="content" class="content">
            <!-- 瀏覽導航開始 -->
            <ol class="breadcrumb pull-right">
                <li><a href="javascript:;">Home</a></li>
                <li><a href="javascript:;">Page</a></li>
                <li>Page</li>
            </ol>
            <!-- 瀏覽導航結束 -->
            <!-- begin page-header -->
            <h1 class="page-header">未製作訂單 <small>未處理的訂單資料</small></h1>
            <!-- end page-header -->
            <div class="panel panel-inverse">
                <div class="panel-heading">
                    <div class="panel-heading-btn">
                        <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" data-click="panel-expand"><i class="fa fa-expand"></i></a>
                        <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-success" data-click="panel-reload"><i class="fa fa-repeat"></i></a>
                        <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-warning" data-click="panel-collapse"><i class="fa fa-minus"></i></a>
                        <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-danger" data-click="panel-remove"><i class="fa fa-times"></i></a>
                    </div>
                    <h4 class="panel-title">未製作訂單資料清單</h4>
                </div>
                <div class="panel-body">
                    <div class="table-responsive">
                        <table id="data-table" class="table table-striped table-bordered nowrap" width="100%">
                            <thead id="title-bar">
                            </thead>
                            <tbody id="tbody-view">

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <!-- 中間內文結束 -->
        <!-- footer開始 -->
        <div id="footer" class="footer">
            &copy; 2017 龔旭陽教授實驗室開發 
        </div>
        <!-- footer結束 -->
        <!-- 置頂按鈕開始 -->
        <a href="javascript:;" class="btn btn-icon btn-circle btn-success btn-scroll-to-top fade" data-click="scroll-top"><i class="fa fa-angle-up"></i></a>
        <!-- 置頂按鈕結束 -->
    </div>
    <!-- 整頁內容結束 -->
    <!-- ================== JS 基本控制 ================== -->
    <script src="../javascript/basic/jquery-1.12.4.min.js"></script>
    <script src="../javascript/basic/bootstrap/bootstrap.min.js"></script>
    <script src="../javascript/basic/jquery-migrate-1.1.0.min.js"></script>
    <script src="../javascript/basic/jquery-ui.min.js"></script>
    <script src="../javascript/basic/jquery.slimscroll.min.js"></script>
    <!-- ================== JS 擴充控制 ================== -->
    <script src="../javascript/tableTools/table-manage-tabletools.demo.min.js"></script>
    <script src="../javascript/tableTools/jquery.dataTables.js"></script>
    <script src="../javascript/tableTools/dataTables.tableTools.js"></script>
    <script src="../javascript/page_controll/apps.min.js"></script>
    <!-- ================== JS notify控制 ================== -->
    <script src="../javascript/notify/notyf.min.js"></script>
    <!-- ================== JS cookie ================== -->
    <script src="../javascript/cookie/js.cookie-2.1.3.min.js"></script>
    <!-- ================== JS sweetalert2 ================== -->
    <script src="../javascript/sweetalert2/sweetalert2.min.js"></script>

    <script>
		$(document).ready(function() {
		    App.init();
		    TableManageTableTools.init();
		});
		var notyf = new Notyf();//notyf.js宣告使用
        /**表格title資料**/
		var count_meat = 0;//計算幾種肉數量
		$.ajax({
		    url: 'http://140.127.22.34/getProduceTitle',
		    type: 'get',
		    dataType: 'json',
		    async: false,//啟用同步請求
		    success: function (title_Json) {
		        var cssString = ""
		        var num = 0
		        var arrname = ["A", "B", "C", "D"];
		        var meat_arr = [];
		        cssString += '<tr><th>核對</th><th>訂單編號</th>'
		        for (i = 0; i < 4; i++) {
		            for (var index in title_Json) {
		                count_meat++
		                cssString +=
                            '<th>' + arrname[i] + title_Json[index].item_name + '</th>'
		                meat_arr.push(arrname[i] + title_Json[index].item_name);
		            }
		        }		       
		        cssString += '<th>單位重量</th><th>包數</th><th>製作狀態</th><th>訂單狀態</th><th>訂單成立時間</th></tr>'
		        $("#title-bar").html(cssString);
		        /**取得表格內資料**/

		        var id_arr = [];
		        $.ajax({
		            url: 'http://140.127.22.34/getProduceDetails',
		            type: 'get',
		            dataType: 'json',
		            async: false,//啟用同步請求
		            success: function (tbody_Json) {
		                var csstbodyString = ""
		                for (var index in tbody_Json) {
		                    id_arr.push(tbody_Json[index].detail_fodder_id);
		                }
		                var deduped = id_arr.filter(function (element, index, arr) {
		                    return arr.indexOf(element) === index;
		                });
		                for (var a in deduped) {
		                    for (var index in tbody_Json) {
		                        if (deduped[a] === tbody_Json[index].detail_fodder_id)
		                        {
                                
		                        }
		                    }
		                }


		                //for (var index in tbody_Json) {
		                //    /**前兩個資料***/
		                //    if (check_order_id != tbody_Json[index].order_id || check_weight_unit != tbody_Json[index].detail_fodder_id) {
		                //        check_order_id = tbody_Json[index].order_id
		                //        check_weight_unit = tbody_Json[index].detail_fodder_id
		                //        csstbodyString += '<tr><td><input type="checkbox" value="" /></td><td>' + tbody_Json[index].order_id + '</td>'
		                //        //if (tbody_Json[index].name == $.trim($(this).find("th:eq(2)").text()))
		                //        {
		                //            csstbodyString += '<td>' + tbody_Json[index].weight + '</td>'
		                //        }
		                //        end_view++
		                //    } else {
		                //        $('#data-table > thead > tr ').each(function () {//取得title值   
		                //            for (i = 3 ; i < count_meat + 2 ; i++) {
		                //                if (tbody_Json[index].name == $.trim($(this).find("th:eq(" + i + ")").text())) {
		                //                }
		                //                if (tbody_Json[index].name != $.trim($(this).find("th:eq(" + i + ")").text())) {
		                //                    check_nullVaule++//18
		                //                }
		                //               
		                //            }
		                //        })
		                //        //alert(check_nullVaule)
		                //        if (check_nullVaule == count_meat - 2) {
		                //            csstbodyString += '<td>---</td>'
		                //            end_view++
		                //        } else {
		                //            csstbodyString += '<td>' + tbody_Json[index].weight + '</td>'
		                //            end_view++
		                //        }
		                //    }
		                //    /**打印後半部資料**/
		                //    if (end_view === count_meat) {
		                //        csstbodyString +=
                        //         '<td>' + tbody_Json[index].weight_unit + '</td>' +
                        //         '<td>' + tbody_Json[index].fodder_number + '</td>' +
                        //         '<td>' + tbody_Json[index].makestauts + '</td>' +
                        //         '<td>' + tbody_Json[index].order_status + '</td>' +
                        //         '<td>' + tbody_Json[index].order_starttime + '</td></tr>'
		                //        end_view = 0
		                //        check_nullVaule = 0
		                //    }
                        //
		                //}
		                //$("#tbody-view").html(csstbodyString);
		            },
		            error: function (e) {
		                notyf.alert('伺服器錯誤,無法載入');
		            }
		        });
		    },
		    error: function (e) {
		        notyf.alert('伺服器錯誤,無法載入');
		    }                                                                                          
		});
    </script>

</body>
</html>
